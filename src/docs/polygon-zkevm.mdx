---
title: Polygon zkEVM
subtitle: Polygon zkEVM is a leading Zero-Knowledge Rollup that targets bytecode-level compatibility with the Ethereum Virtual Machine. At the moment, the rollup uses a trusted and centralised sequencer  operated by the core team. Cryptographic proofs are used to ensure the validity of state transitions within the rollup.
labels:
    - ZK rollup
    - EVM
    - Mainnet
---

<Section title="Overview">

    Polygon zkEVM is a leading Zero-Knowledge Rollup that targets bytecode-level compatibility with the Ethereum Virtual Machine. At the moment, the rollup uses a trusted and centralised sequencer  operated by the core team. Cryptographic proofs are used to ensure the validity of state transitions within the rollup.

    ###### Focus

    - Providing full byte-code level EVM compatibility without requiring any compiler or tooling changes

    <Labels labels={['ZK Rollup', 'EVM', 'Mainnet']} />

</Section>

<Section title="General">

    <Parameter name="Block Time" value="Irregular*" tooltip="New L2 Block contains only one L2 transaction and it is created on-demand, i.e once there is a new transaction" />

    <Parameter name="Gas Limit" value="30M" tooltip="The gas limit that can be consumed by an L2 block." />

    <Parameter name="Sequencing Frequency" value="~4-8 minutes" tooltip="The frequency at which the rollup posts L2 transactions on Ethereum L1. Minutes vary based on the load of the Rollup" />

    <Parameter name="Finality" value="~1 hour" tooltip="The time it takes for validity proof to be generated and submitted which makes an L2 transaction final" />

    <Parameter name="Rollup’s State Contract on L1" value={<a href="https://etherscan.io/address/0x5132a183e9f3cb7c848b0aac5ae0c4f0491b7ab2" target="_blank">0x5132A183E9F3CB7C848b0AAC5Ae0c4f0491B7aB2</a>} tooltip="The contract used for sequencing, proving and storing the state of the L2 network" />

    <Parameter name="Messaging" tooltip="The Rollup provides native communication with L1. Anyone is able to transmit arbitrary messages and Polygon zkEVM will provide proof of the data transfer on the destination chain." />

    - ###### L1 → L2
        <Parameter name="Latency" value="~6-8 minutes" tooltip="The time it takes for a message to be made available on the Rollup after it is included in the Ethereum block." />
        <Parameter name="Cost" value="95000 L2 gas" tooltip="The L2 gas cost for proving and executing a message from Ethereum on Polygon zkEVM" />
    <br />
    - ###### L1 → L2
        <Parameter name="Latency" value="~1 hour" tooltip="The time it takes for a message to be made available on Ethereum after being included in a Polygon zkEVM block and sequenced to L1." />
        <Parameter name="Cost" value="95000 L1 gas" tooltip="The gas cost of proving and executing a message on Ethereum after being sent from Polygon zkEVM" />
    ___

    <Parameter name="Transaction Types" tooltip="The types of transactions supported on the Rollup" />

    - **Type 0** - User Transactions. Represent [pre-EIP-2718](https://eips.ethereum.org/EIPS/eip-2718) transactions
    - No support for  [EIP-2718](https://eips.ethereum.org/EIPS/eip-2718), [EIP-2930](https://eips.ethereum.org/EIPS/eip-2930) and [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559) type transactions.

    <Parameter name="State Trie" value="Sparse Merkle Trie + Poseidon Hashing" tooltip="The data structure used to represent the state of the Rollup along with the hashing algorithm used to compute the root of the trie" />

    <Parameter name="Node Implementations" tooltip="The different client implementations of the Rollup" />

    - [zkevm-node](https://github.com/0xPolygonHermez/zkevm-node) (Go)

</Section>

<Section title="OPCODEs">

    <Legend />

    The following table encapsulates EVM OPCODE differences compared to the canonical Ethereum L1 implementation.

    | | Opcode | Name | Solidity equivalent | Rollup Behaviour | Ethereum L1 Behaviour |
    | :--- | :----- | :--- | :-------------------| :--------------- | :-------------------- |
    | ![link icon](../images/link-icon.png) | FF | `SELFDESTRUCT` | `selfdestruct(address)` | Removed and replaced by `SENDALL` as per [EIP-4758](https://eips.ethereum.org/EIPS/eip-4758) | Halts execution and registers an account for later deletion. Sends all Ether balance to the specified address. |
    | ![link icon](../images/link-icon.png) | F3 | `EXTCODEHASH` | `selfdestruct(address)` |  | Returns the Poseidon hash of the contract bytecode from the state tree.<br /><br />Returns empty hash even if the account does not exist. |
    | ![link icon](../images/link-icon.png) | 44 | `DIFFICULTY` | `block.difficulty` | Always returns `0` | Returns the output of the randomness beacon provided by the beacon chain |
    | ![link icon](../images/link-icon.png) | 40 | `BLOCKHASH` | `blockhash(x)` | Returns the hash of all previous L2 block hashes instead of just the last 256 blocks.<br /><br />It is the state root at the end of the processable transaction and is stored on the system smart contract. | Returns the hash of one of the 256 most recent complete blocks |
    | ![link icon](../images/link-icon.png) | 43 | `NUMBER` | `block.number` | Blocks on the rollup are created per transaction.<br /><br />The OPCODE returns the number of processed transactions. | Returns the L1 block number |

</Section>

<Section title="Precompiled Contracts">

    The following Precompiled Contracts behave differently compared to the canonical Ethereum L1

    |      | Address | Name | Rollup Behaviour | Ethereum L1 Behaviour |
    | :--- | :----- | :----- | :--------------- | :-------------------- |
    | ![link icon](../images/link-icon.png) | 0x02 <Copy value="0x02" /> | `SHA2-256` | **Not supported**<br /><br />The opcode reverts the execution, returns all gas to the previous context and sets the `success` flag to `0` | Elliptic curve digital signature algorithm (ECDSA) public key recovery function. |
    | ![link icon](../images/link-icon.png) | 0x03 <Copy value="0x03" /> | `RIPEMD-160` | **Not supported**<br /><br />The opcode reverts the execution, returns all gas to the previous context and sets the `success` flag to `0` | Hash function |
    | ![link icon](../images/link-icon.png) | 0x05 <Copy value="0x05" /> | `modexp` | **Not supported**<br /><br />The opcode reverts the execution, returns all gas to the previous context and sets the `success` flag to `0` | Arbitrary-precision exponentiation under modulo |
    | ![link icon](../images/link-icon.png) | 0x06 <Copy value="0x06" /> | `ecAdd` | **Not supported**<br /><br />The opcode reverts the execution, returns all gas to the previous context and sets the `success` flag to `0` | Point addition (ADD) on the elliptic curve `alt_bn128` |
    | ![link icon](../images/link-icon.png) | 0x07 <Copy value="0x07" /> | `ecMul` | **Not supported**<br /><br />The opcode reverts the execution, returns all gas to the previous context and sets the `success` flag to `0` | Scalar multiplication (MUL) on the elliptic curve `alt_bn128` |
    | ![link icon](../images/link-icon.png) | 0x08 <Copy value="0x08" /> | `ecPairing` | **Not supported**<br /><br />The opcode reverts the execution, returns all gas to the previous context and sets the `success` flag to `0` | Bilinear function on groups on the elliptic curve `alt_bn128` |
    | ![link icon](../images/link-icon.png) | 0x09 <Copy value="0x09" /> | `blake2f` | **Not supported**<br /><br />The opcode reverts the execution, returns all gas to the previous context and sets the `success` flag to `0` | Compression function F used in the BLAKE2 cryptographic hashing algorithm |

</Section>

<Section title="System Contracts">

    The following system contracts have been introduced on the Rollup.

    | | Address | Name | Description |
    | :--- | :--- | :--- | :--- |
    | ![link icon](../images/link-icon.png) | 0x2a3...De <Copy value="0x2a3DD3EB832aF982ec71669E178424b10Dca2EDe" /> | `PolygonZkEVMBridge` | Provides functionality for sending and retrieving messages and assets between domains (Ethereum and Polygon zkEVM).<br /><br /> [Reference](https://github.com/0xPolygonHermez/zkevm-contracts/blob/main/contracts/PolygonZkEVMBridge.sol) |

</Section>

<Section title="RPC-API">

    The following endpoints behave differently compared to the canonical Ethereum L1 implementation of the JSON RPC API.


    |      | Method | Params | Rollup Behaviour | Ethereum L1 Behaviour |
    | :--- | :----- | :----- | :--------------- | :-------------------- |
    | ![link icon](../images/link-icon.png) | `eth_call` | - Object - The transaction call object<br />- QUANTITY TAG - integer block number, or the string `latest`, `earliest` or `pending`, see the default block parameter | Executes a new message call immediately without creating a transaction on the blockchain.<br /><br />Does not support state override and pending block.<br /><br />Does not support `from` values that are smart contract addresses. | Executes a new message call immediately without creating a transaction on the blockchain <Modified /> |
    | ![link icon](../images/link-icon.png) | `eth_estimateGas` | | Generates and returns an estimate of how much gas is necessary to allow the transaction to complete.<br /><br />If the block number is set to `pending` it is replaced and computed with `latest` | Generates and returns an estimate of how much gas is necessary to allow the transaction to complete. <Modified /> |
    | ![link icon](../images/link-icon.png) | `eth_getBalance` | | Returns the balance of the account of the given address.<br /><br />If the block number is set to `pending` it is replaced and computed with `latest` | Returns the balance of the account of the given address. <Modified /> |
    | ![link icon](../images/link-icon.png) | `eth_getCode` | | Returns code at a given address.<br /><br />If the block number is set to `pending` it is replaced and computed with `latest` | Returns code at a given address. <Modified /> |
    | ![link icon](../images/link-icon.png) | `eth_getUncleByBlockHashAndIndex` | | Response is always empty | Returns information about a uncle of a block by hash and uncle index position. <Modified /> |
    | ![link icon](../images/link-icon.png) | `eth_getUncleByBlockNumberAndIndex` | | The response is always empty | Returns information about a uncle of a block by number and uncle index position. <Modified /> |
    | ![link icon](../images/link-icon.png) | `eth_getUncleCountByBlockHash` | | The response is always zero. | Returns the number of uncles in a block from a block matching the given block hash. <Modified /> |
    | ![link icon](../images/link-icon.png) | `eth_getUncleCountByBlockNumber` | | The response is always zero. | Returns the number of uncles in a block from a block matching the given block number. <Modified /> |
    | ![link icon](../images/link-icon.png) | `eth_protocolVersion` | | The response is always zero. | Returns the current Ethereum protocol version. <Modified /> |
    | ![link icon](../images/link-icon.png) | `txpool_content` | | The response is always empty | N/A <Modified /> |
    | ![link icon](../images/link-icon.png) | `zkevm_batchNumber` | None | Returns the latest batch number | N/A <Added /> |
    | ![link icon](../images/link-icon.png) | `zkevm_batchNumberByBlockNumber` | hex string block number | Returns the batch number of the batch connected to the block. | N/A <Added /> |
    | ![link icon](../images/link-icon.png) | `zkevm_consolidatedBlockNumber` | None | Returns the latest block number that is connected to the latest batch verified. | N/A <Added /> |
    | ![link icon](../images/link-icon.png) | `zkevm_getBatchByNumber` | hex batch number or a tag (`earliest` / `latest`) | Gets a batch for a given number | N/A <Added /> |
    | ![link icon](../images/link-icon.png) | `zkevm_isBlockConsolidated` | hex string block number | Returns true if the provided block number is already connected to a batch that was already verified, otherwise false. | N/A <Added /> |
    | ![link icon](../images/link-icon.png) | `zkevm_isBlockVirtualized` | hex string block number | Returns true if the provided block number is already connected to a batch that was already virtualized, otherwise false. | N/A <Added /> |
    | ![link icon](../images/link-icon.png) | `zkevm_verifiedBatchNumber` | hex batch number | Returns the latest verified batch number. | N/A <Added /> |
    | ![link icon](../images/link-icon.png) | `zkevm_virtualBatchNumber` | hex batch number | Returns the latest virtual batch number. | N/A <Added /> |

</Section>

<Section title="Transaction Fees">

    Transaction fees are paid in Ether. There is no concept of an L1 calldata fee used in other rollups. Developers must set `gasPrice` which is high enough so that the sequencer would include the transaction in a batch. Information on the gas price can be retrieved from the JSON RPC endpoint.

    Additional incentive mechanisms are introduced for sequencers and verifiers. More info in the [docs](https://zkevm.polygon.technology/docs/protocol/incentive-mechanism).

    ###### Other

    Polygon zkEVM introduces `zk-counters` which are computing constraints enforced on OPCODEs / Precompiles similar to `gas`. Each operation increments the counter and if the counter gets above a certain threshold the transaction is reverted.

</Section>

<Section title="Tools">

    Existing EVM-based tooling is supported such as `ethers`, `web3.js`, `ethers-rs`, `hardhat`, `foundry` and `truffle`. There might be compatibility issues when the framework uses [EIP-2718](https://eips.ethereum.org/EIPS/eip-2718) Type 2 transactions by default, but changing the type to legacy would resolve the problem.

</Section>
